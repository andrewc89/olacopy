# olacopy
Windows batch scripts to manage replication of backups generated by Ola Hallengren's maintenance solution.

https://ola.hallengren.com/sql-server-backup.html

USE AT YOUR OWN RISK

## copyBackups.cmd

Using `xcopy`, pushes all backup files, in the same directory structure, to the destination directory.

### log
Full path of log file for `xcopy` output + date/time

### src
Full path of source directory. Current root directory of backups. This should be the value of the `@Directory` argument for the backup `sqlcmd`s + `\{name of your server}`.

### dest
Full path of the destination directory.

## cleanBackups.cmd

Manages backup retention at the replication directory (i.e. deletes old backup files).

### src
The same value as `dest` in `copyBackups.cmd`.

### command
For testing. By default set to `echo`. Once the script is tested set to `del`.

### fullRetention
Retention period, in days, for full backups of user databases.

### diffRetention
Retention period, in days, for diff backups of user databases.

### logRetention
Retention period, in days, for log backups of user databases.

### systemRetention
Retention period, in days, for full backups of system databases.

## cleanLocalLogs.cmd

I like to keep a full 3 days worth of log backups locally (in addition to the current day's backups). With the log backups running every 5 minutes and `@CleanupTime = 72` set in the `sqlcmd`, the system is deleting an "old" log file every 5 minutes. So I opt to run this file as an extra step after every nightly diff or full backup.

### drive
Drive letter of `src`.

### srcPath
Directory path of `src`.

### command
For testing. By default set to `echo`. Once the script is tested set to `del`.
